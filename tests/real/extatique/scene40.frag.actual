/* File generated with Shader Minifier 1.1.6
 * http://www.ctrl-alt-test.fr
 */
#ifndef SCENE40_FRAG_ACTUAL_
# define SCENE40_FRAG_ACTUAL_
# define VAR_N "z"
# define VAR_CENTER "x"
# define VAR_EYEPOS "d"
# define VAR_LIGHT1 "f"
# define VAR_LIGHT2 "r"
# define VAR_LIGHT3 "n"
# define VAR_LIGHT4 "t"
# define VAR_MEDIUM "o"
# define VAR_RADIUS "y"
# define VAR_TEX "v"
# define VAR_WPOS "m"

const char *scene40_frag =
 "uniform sampler2D v;"
 "varying vec3 m,z;"
 "uniform vec3 d;"
 "uniform float y,o;"
 "uniform vec3 x,f,r,n,t;"
 "vec3 s(vec3 s,vec2 z)"
 "{"
   "vec3 m=texture2D(v,z*.05).xyz,y=s*.1-vec3(-.5,-.5,-.5),x=s*.1-vec3(.5,.5,-.5),o=s*.1-vec3(-.5,.5,.5),a=s*.1-vec3(.5,-.5,.5),d=f*vec3(max(0.,1.25-dot(y,y))),e=r*vec3(max(0.,1.25-dot(x,x))),c=n*vec3(max(0.,1.25-dot(o,o))),l=t*vec3(max(0.,1.25-dot(a,a)));"
   "return m+d+e+c+l;"
 "}"
 "float s(float v)"
 "{"
   "float s=max(-1.15365,v);"
   "return 1.+s*(1.+s*(.5+s*.333333));"
 "}"
 "vec3 e(vec3 v,vec3 z)"
 "{"
   "vec3 m=vec3(0.),o=v,y=z,f=vec3(.5),x,r=vec3(0.),a,e;"
   "vec2 d;"
   "vec3 n,t;"
   "for(int u=0;u<1;++u)"
     "{"
       "a=40.*y;"
       "e=vec3(0.);"
       "d=vec2(0.);"
       "x=o+a;"
       "if(abs(x.x)>10.)"
         "{"
           "if(x.x>10.)"
             "a*=(9.99-o.x)/a.x,e=vec3(-1.,0.,0.),x=a+o,d=x.yz,r=s(x,d);"
           "else"
             " a*=(-9.99-o.x)/a.x,e=vec3(1.,0.,0.),x=a+o,d=x.yz*vec2(-1.,1.),r=s(x,d);"
         "}"
       "if(abs(x.y)>10.)"
         "{"
           "if(x.y>10.)"
             "a*=(9.99-o.y)/a.y,e=vec3(0.,-1.,0.),x=a+o,d=x.xz*vec2(-1.,1.),r=s(x,d);"
           "else"
             " a*=(-9.99-o.y)/a.y,e=vec3(0.,1.,0.),x=a+o,d=x.xz,r=s(x,d);"
         "}"
       "if(abs(x.z)>10.)"
         "{"
           "if(x.z>10.)"
             "a*=(9.99-o.z)/a.z,e=vec3(0.,0.,-1.),x=a+o,d=x.xy*vec2(-1.,1.),r=s(x,d);"
           "else"
             " a*=(-9.99-o.z)/a.z,e=vec3(0.,0.,1.),x=a+o,d=x.xy,r=s(x,d);"
         "}"
       "t=r*vec3(s(-length(a)*.04));"
       "m+=t*f;"
       "f*=t;"
       "n=reflect(y,e);"
       "o=x;"
       "y=n;"
     "}"
   "return m;"
 "}"
 "void e(vec3 v,vec3 x,float s,float a,out vec3 e,out vec3 y,out float d)"
 "{"
   "float o=s/a,r=dot(-v,x);"
   "d=sqrt(1.-o*o*(1.-r*r));"
   "e=v+x*(2.*r);"
   "y=v*o+x*(d+o*r);"
 "}"
 "void main()"
 "{"
   "vec3 r=normalize(z),a=normalize(m-d),v,f;"
   "float n,t;"
   "e(a,r,1.,o+.1,v,f,n);"
   "float u=2.*n*y;"
   "vec3 c=m+f*vec3(u),l=-(c-x)/y,i,g;"
   "e(f,l,o+.3,1.,i,g,t);"
   "float b=2.*s(-dot(u,u)*.2);"
   "vec3 C=e(c,g)*vec3(b),D=e(m,v)*gl_Color.xyz;"
   "gl_FragColor=gl_Color*vec4(D+C,1.);"
 "}";

#endif // SCENE40_FRAG_ACTUAL_
