/* File generated with Shader Minifier 1.1.6
 * http://www.ctrl-alt-test.fr
 */
#ifndef DISTANCEFIELDRAYTRACE_FRAG_EXPECTED_
# define DISTANCEFIELDRAYTRACE_FRAG_EXPECTED_
# define VAR_DIR "v"
# define VAR_ORG "m"

const char *distancefieldRaytrace_frag =
 "varying vec3 m,v;"
 "float n(vec3 m,float v)"
 "{"
   "return abs(v-m.y);"
 "}"
 "float t(vec3 m,vec4 v)"
 "{"
   "return length(v.xyz-m)-v.w;"
 "}"
 "float h(vec3 v,vec4 m)"
 "{"
   "return length(vec2(m.x+.5*sin(v.y+v.z*2.),m.z)-v.xz)-m.w;"
 "}"
 "float h(vec3 v)"
 "{"
   "float m=n(v,-5.);"
   "m=min(m,n(v,5.));"
   "m=min(m,t(v,vec4(0,-2,15,1.5)));"
   "m=min(m,t(v,vec4(-8,0,20,2.)));"
   "m=min(m,t(v,vec4(-5,4,15,.5)));"
   "m=min(m,t(v,vec4(-1,3,15,2.)));"
   "m=min(m,t(v,vec4(2,-3,15,.5)));"
   "m=min(m,h(v,vec4(10,0,20,1.)));"
   "m=min(m,h(v,vec4(4,0,15,1.)));"
   "m=min(m,h(v,vec4(0,0,20,1.)));"
   "m=min(m,h(v,vec4(-2,0,25,1.)));"
   "m=min(m,h(v,vec4(-6,0,30,1.)));"
   "m=min(m,h(v,vec4(-12,0,35,1.)));"
   "return m;"
 "}"
 "vec3 n(vec3 v)"
 "{"
   "float m=.01;"
   "return normalize(vec3(h(v+vec3(m,0,0))-h(v-vec3(m,0,0)),h(v+vec3(0,m,0))-h(v-vec3(0,m,0)),h(v+vec3(0,0,m))-h(v-vec3(0,0,m))));"
 "}"
 "float l(vec3 v,vec3 m)"
 "{"
   "float l=.5,t=0.,r=1.;"
   "for(int f=0;f<6;f++)"
     "t+=(float(f)*l-h(v+m*float(f)*l))/r,r*=2.;"
   "return 1.-t;"
 "}"
 "void main()"
 "{"
   "float r,t=0.;"
   "vec3 f=m;"
   "for(int a=0;a<64;a++)"
     "t=h(f),f=f+t*v;"
   "if(t>1.)"
     "{"
       "gl_FragColor=vec4(0,0,0,1);"
       "return;"
     "}"
   "vec3 a=n(f);"
   "float s=l(f,a);"
   "vec3 i=vec3(0,0,0),g[3],d[3];"
   "g[0]=vec3(-4,0,4);"
   "g[1]=vec3(2,3,8);"
   "g[2]=vec3(4,-2,24);"
   "d[0]=vec3(1.,.5,.4);"
   "d[1]=vec3(.4,.5,1.);"
   "d[2]=vec3(.2,1.,.5);"
   "for(int x=0;x<3;x++)"
     "{"
       "vec3 e,z;"
       "z=g[x]-f;"
       "e=normalize(z);"
       "r=length(z);"
       "r=max(0.,dot(e,a))/r*float(10);"
       "i+=r*d[x];"
     "}"
   "float z=min(1.,20./length(f-m));"
   "gl_FragColor=vec4(i*s,1)*z*z;"
 "}";

#endif // DISTANCEFIELDRAYTRACE_FRAG_EXPECTED_
